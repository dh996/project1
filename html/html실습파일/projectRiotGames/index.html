<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOLIndex</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>

    <div class="header"></div>

    <section id="indexSection">
        
        <div id="article1Back">
            <article id="article1" class="row">
    
                <div class="art1">
                    <div class="art1Img"><img src="./css/cssSource/article1Img.png" alt=""></div>
                    <div class="art1Text">
                        <h1>전투가 시작됩니다!</h1>
                        <a href="javascript:;">
                            <div class="art1Btn">
                                <div><i class="fa-solid fa-circle-right"></i></div>
                                <div>시청하기</div>
                            </div>
                        </a>
                    </div>
                </div>
    
            </article>
        </div>

        <div id="article2Back">
            <article id="article2" class="row">
    
                <div class="art2">
                    <h2>소식</h2>
                    <div class="art2Post">
                        
                        <!-- <div class="art2Main">
                            <a href="javascript:;">
                                <img src="./css/cssSource/article2Main.png" alt="">
                                <div class="art2MainText">
                                    <div class="art2MainTitle">
                                        <h3>소울 파이터 코스프레 가이드 2라운드</h3>
                                        <div>
                                            <div>소식</div>
                                            <div class="del">삭제</div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="art2Sub">
                            <div class="art2SubBanner">
                                <a href="javascript:;">
                                    <div class="art2BannerText">
                                        <h3>2023년 하반기 계획|개발자 스냅샷 - 레전드 오브 룬테라</h3>
                                        <div>
                                            <div class="art2PostCat">소식</div>
                                            <div class="del">삭제</div>
                                        </div>
                                    </div>
                                    <div class="art2BannerImg">
                                        <img src="./css/cssSource/article2Banner1.png" alt="">
                                        <div>R</div>
                                    </div>
                                </a>
                            </div>
                        </div> -->
    
                    </div>

                    <div class="art2PlusMenu">
                        <div class="art2Plus">모두 보기</div>
                        <div class="art2Admin"><i class="fa-solid fa-gear"></i></div>
                    </div>
                    <form action="#" method="post" class="art2AdminForm">
                        <div class="art2AdminFormInput">
                            <div>
                                <p>제목</p>
                                <label for=""><input name="title" type="text"></label>
                            </div>
                            <div>
                                <p>분류1</p>
                                <label for=""><input name="category" type="text"></label>
                            </div>
                            <div>
                                <p>분류2</p>
                                <label for=""><input type="radio" name="game" value="L">LOL</label>
                                <label for=""><input type="radio" name="game" value="T">TFT</label>
                                <label for=""><input type="radio" name="game" value="V">VAL</label>
                                <label for=""><input type="radio" name="game" value="R">LOR</label>
                                <label for=""><input type="radio" name="game" value="W">WR</label>
                                <label for=""><input type="radio" name="game" value="Riot">RIOT</label>
                            </div>
                        </div>
                        <div class="art2AdminSubmit">
                            <button type="submit">작성하기</button>
                        </div>
                    </form>
    
                </div>
    
            </article>
        </div>

        <div id="otherBack">
            <article id="article3" class="banners row">
                <h2>라이엇 게임즈의 게임</h2>
    
                <div class="artBanner">
                    <a href="./LOLMain.html">
                        <img src="./css/cssSource/art3Banner1.png" alt="">
                        <div><img src="./css/cssSource/LOL.svg" alt=""></div>
                    </a>
                </div>
                <div class="artBanner">
                    <a href="javascript:;">
                        <img src="./css/cssSource/art3Banner2.png" alt="">
                        <div><img src="./css/cssSource/TFT.svg" alt=""></div>
                    </a>
                </div>
                <div class="artBanner">
                    <a href="javascript:;">
                        <img src="./css/cssSource/art3Banner3.png" alt="">
                        <div><img src="./css/cssSource/Valorant.svg" alt=""></div>
                    </a>
                </div>
                <div class="artBanner">
                    <a href="javascript:;">
                        <img src="./css/cssSource/art3Banner4.png" alt="">
                        <div><img src="./css/cssSource/WildRift.svg" alt=""></div>
                    </a>
                </div>
                <div class="artBanner">
                    <a href="javascript:;">
                        <img src="./css/cssSource/art3Banner5.png" alt="">
                        <div><img src="./css/cssSource/Runeterra.svg" alt=""></div>
                    </a>
                </div>
            </article>
    
            <article id="article4" class="banners row">
                <h2>E스포츠</h2>
                <div class="artBanner">
                    <a href="javascript:;" >
                        <img src="./css/cssSource/art4Banner1.png" alt="">
                        <div><img src="./css/cssSource/art4Banner1Logo.png" alt=""></div>
                    </a>
                </div>
                <div class="artBanner">
                    <a href="javascript:;" >
                        <img src="./css/cssSource/art4Banner2.png" alt="">
                        <div><img src="./css/cssSource/art4Banner2Logo.png" alt=""></div>
                    </a>
                </div>
    
            </article>
    
            <article id="article5" class="banners row">
                <h2>엔터테인먼트</h2>
                <div class="artBanner">
                    <a href="javascript:;">
                        <img src="./css/cssSource/art5Banner1.png" alt="">
                        <div><img src="./css/cssSource/art5Banner1Logo.png" alt=""></div>
                    </a>
                </div>
                <div class="artBanner">
                    <a href="javascript:;">
                        <img src="./css/cssSource/art5Banner2.png" alt="">
                        <div><img src="./css/cssSource/art5Banner2Logo.png" alt=""></div>
                    </a>
                </div>
            </article>
    
            <article id="article6" class="bannerFlex row">
                <h2>Riot Forge</h2>
                <div class="art6Box">
                    <div class="art6Flex">
                        <div class="art6FlexBox">
                            <div class="artBannerFlex">
                                <a href="./LOLMain.html">
                                    <img src="./css/cssSource/art3Banner1.png" alt="">
                                    <div><img src="./css/cssSource/LOL.svg" alt=""></div>
                                </a>
                            </div>
                            <div class="artBannerFlex">
                                <a href="javascript:;">
                                    <img src="./css/cssSource/art3Banner2.png" alt="">
                                    <div><img src="./css/cssSource/TFT.svg" alt=""></div>
                                </a>
                            </div>
                            <div class="artBannerFlex">
                                <a href="javascript:;">
                                    <img src="./css/cssSource/art3Banner3.png" alt="">
                                    <div><img src="./css/cssSource/Valorant.svg" alt=""></div>
                                </a>
                            </div>
                            <div class="artBannerFlex">
                                <a href="javascript:;">
                                    <img src="./css/cssSource/art3Banner4.png" alt="">
                                    <div><img src="./css/cssSource/WildRift.svg" alt=""></div>
                                </a>
                            </div>
                            <div class="artBannerFlex">
                                <a href="javascript:;">
                                    <img src="./css/cssSource/art3Banner5.png" alt="">
                                    <div><img src="./css/cssSource/Runeterra.svg" alt=""></div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="art6BoxControl">
                    <div class="on"></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </article>
        </div>
    </section>

    <div class="footer"></div>
    
    <script src="./js/common.js"></script>
    <script>
        $('.header').load('header.html')

        let data = '';
        $.ajax({
            type:'GET',
            url:'./js/Data.json',
            dataType:'json',
            success : function(rdata){
                data = rdata.art2Post
                /* console.log(data) */
                art2Post()
            },
            error : function(xhr){
                alert(xhr.status+"/"+xhr.errorText)
            }
        })

        //art2 포스팅함수
        function art2Post(){

            let newData = data
            let post = `<div class="art2Main">`

            newData.forEach((element,index) => {
                
                if(!index){
                    post+=`<a href="javascript:;">
                                <img src="${element.imgLink}" onerror="this.src='./css/cssSource/none.png'" alt="">
                                <div class="art2MainText">
                                    <div class="art2MainTitle">
                                        <h3>${element.title}</h3>
                                        <div>
                                            <div>${element.category}</div>
                                            <div class="delMain">삭제</div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="art2Sub">`
                }else{
                    post+=`<div class="art2SubBanner">
                                <a href="javascript:;">
                                    <div class="art2BannerText">
                                        <h3>${element.title}</h3>
                                        <div>
                                            <div class="art2PostCat">${element.category}</div>
                                            <div class="delSub">삭제</div>
                                        </div>
                                    </div>
                                    <div class="art2BannerImg">
                                        <img src="${element.imgLink}" onerror="this.src='./css/cssSource/none.png'" alt="">
                                        <div>${element.game}</div>
                                    </div>
                                </a>
                            </div>`
                }               
            });

            post+=`</div>`

            $('.art2Main').remove()
            $('.art2Sub').remove()
            $('.art2Post').append(post)
            $('.art2Post .art2Sub .art2SubBanner').each(function(a){
                console.log(a)

                if(a>2){
                    $(this).css({
                        display: 'none',
                    })
                }
            })
        }

        //art6 세로사이즈조절
        $(window).on('resize', function(){
            let boxSize = $('.art6FlexBox').height()
            $('.art6Flex').css({
                height: boxSize
            })
            /* if(!$('.art2Sub').hasClass('on')){
                let boxSize2 = $('.art2SubBanner').height()
                $('.art2Sub').css({
                    height: (boxSize2*3)+'px'
                })
            } */
        })

        let art6Flag = 0;

        //art6 이동외부함수
        $('.art6BoxControl div').on('click', function(){
            $(this).addClass('on').siblings().removeClass('on')
            let i = $(this).index()
            console.log(i)

            art6Move(i)
        })   

        //art6 이동내부함수
        function art6Move(i){

            $('.art6FlexBox').animate({
                left : '-='+((i-art6Flag)*100)+'%'
            }, 500)
            art6Flag = i
        }

        //art2서브배너 여닫이
        $('.art2Plus').on('click', function(){
            /* $(this).toggleClass('on') */

            if(!$(this).hasClass('on')){
                $(this).text("접기")
                $(this).addClass('on')
                $('.art2Post .art2Sub .art2SubBanner').each(function(a){
                console.log(a)

                    if(a>2){
                        $(this).css({
                            display: 'block',
                        })
                    }
                })
            }else{
                $(this).text("모두 보기")
                $(this).removeClass('on')
                $('.art2Post .art2Sub .art2SubBanner').each(function(a){
                console.log(a)

                    if(a>2){
                        $(this).css({
                            display: 'none',
                        })
                    }
                })
            }
        })

        //art2관리자모드 여닫이
        $('.art2Admin').on('click', function(){
            $('.art2AdminForm').toggleClass('active')
        })

        //art2게시글추가
        $('.art2AdminForm').on('submit', function(e){
            e.preventDefault()

            let title = $('input[name=title]').val()
            if(!title){
                alert('제목 입력하세요')
                return false
            }
            let category = $('input[name=category]').val()
            if(!category){
                alert('분류1을 입력하세요')
                return false
            }
            let game = $('input[name=game]:checked').val();
            /* $('input[name=game]').each(function(){
                if($(this).prop('checked')){
                    game = $(this).val()
                }
            }) */
            
            if(!game){
                alert('분류2를 체크하세요')
                return false
            }

            let art2DataPlus = {
                title : title,
                category : category,
                imgLink : "",
                game : game
            }

            data.unshift(art2DataPlus)
            /* console.log(data) */
            art2Post()
            alert('작성되었습니다')
            $('input[name=title]').val("")
            $('input[name=category]').val("")
            $('input[name=game]').prop("checked", false);
        })

        //art2메인게시글삭제
        $('body').on('click', '.delMain', function(){
            data.splice(0, 1)
            art2Post()
        })

        //art2서브게시글삭제
        $('body').on('click', '.delSub', function(){
            let delnum = $(this).parents('.art2SubBanner').index()
            /* console.log(delnum) */
            data.splice((delnum+1), 1)
            art2Post()
        })
    </script>

</body>
</html>